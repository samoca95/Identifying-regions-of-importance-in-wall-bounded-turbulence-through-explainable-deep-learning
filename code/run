#!/usr/bin/env bash
set -ex

# This is the master script for the capsule. When you click "Reproducible Run", the code in this file will execute.

# Run the 3d simulations
cd Simulation_3d/
python -u main_segment.py "$@"      # Pre-process the data
python -u main_CNN.py "$@"          # Define and train the CNN
python -u plottrain.py "$@"         # Plot the CNN training history
python -u main_evCNN.py "$@"        # Evaluate the results from the CNN
python -u main_evCNN_error.py "$@"  # Same that above, but plots the surfaces
python -u main_shap.py "$@"         # Calculate and save the SHAP values
python -u readshap.py "$@"          # Read and plot the results

# Run the 2d experiments
cd ../Experiment_2d/
python -u main_segment.py "$@"
python -u main_CNN.py "$@"
python -u plottrain.py "$@"
python -u main_evCNN_compare.py "$@"
python -u main_evCNN_error.py "$@"
python -u main_evCNN.py "$@"
python -u main_shap.py "$@"
python -u readshap.py "$@"
# Run the 2d experiments for node influence
cd ../Experiment_2d_point/
python -u main_shap.py "$@"
python -u readshap_deep.py "$@"

echo "Final"

